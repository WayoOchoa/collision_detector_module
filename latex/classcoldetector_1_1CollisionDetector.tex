\hypertarget{classcoldetector_1_1CollisionDetector}{}\section{coldetector\+:\+:Collision\+Detector Class Reference}
\label{classcoldetector_1_1CollisionDetector}\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}


Collaboration diagram for coldetector\+:\+:Collision\+Detector\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=267pt]{classcoldetector_1_1CollisionDetector__coll__graph}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_aa2169b92cec8e25c107622210b4c2872}\label{classcoldetector_1_1CollisionDetector_aa2169b92cec8e25c107622210b4c2872}} 
{\bfseries Collision\+Detector} (\hyperlink{classcSystem}{c\+System} $\ast$cam\+\_\+system, ros\+::\+Publisher $\ast$pc\+\_\+pub)
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_af720f23bdcfe3536325fae4891d12ad8}\label{classcoldetector_1_1CollisionDetector_af720f23bdcfe3536325fae4891d12ad8}} 
void \hyperlink{classcoldetector_1_1CollisionDetector_af720f23bdcfe3536325fae4891d12ad8}{assign\+Chassis\+Points} ()
\begin{DoxyCompactList}\small\item\em Function that initialize a set of 3D points for the A\+UV chassis. These points are used later for assesing the risk. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_aa09c4115cdb0c5e3c0ecb3a29d3aac96}{Run} ()
\begin{DoxyCompactList}\small\item\em Obtains a pair of images and the estimated poses (v\+S\+L\+Am, I\+NS data) and processed them to obtain the 3D points of the robot surroundings. \end{DoxyCompactList}\item 
bool \hyperlink{classcoldetector_1_1CollisionDetector_aa4b6c5b052532e545758f84a668b43b2}{Check\+Data\+Availability} ()
\begin{DoxyCompactList}\small\item\em Checks if new image and pose data is available from the system and copies them for processing. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_a41e80df83d6f79de79798674bef21156}{transfer\+Data} (const \hyperlink{classMultiFrame}{Multi\+Frame} \&F, bool new\+\_\+data)
\begin{DoxyCompactList}\small\item\em Transfers data from the main program to the collision detection thread. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_a3e5a171f0d396656745e84b8e7a80cd9}{Frames\+Update} (\hyperlink{classMultiFrame}{Multi\+Frame} \&current\+\_\+frame)
\begin{DoxyCompactList}\small\item\em Updates the previous\+\_\+frame data with the current\+\_\+frame that was already processed. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_a01855b9eb3534d701df52f0f503fdc1e}{Get\+Relative\+Transformation\+Between\+Frames} (const cv\+::\+Mat \&base\+\_\+\+T\+\_\+cam, const cv\+::\+Mat \&world\+\_\+\+Tprevious\+\_\+base, const cv\+::\+Mat \&world\+\_\+\+Tcurrent\+\_\+base, cv\+::\+Mat \&cam\+\_\+previous\+\_\+\+T\+\_\+cam\+\_\+current)
\begin{DoxyCompactList}\small\item\em Computes the relative transformation between two frames. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_af385733b461bda4f537cb97f7616a352}{Compute\+Features} (const cv\+::\+Mat \&previous\+\_\+image\+\_\+cam\+\_\+i, const cv\+::\+Mat \&current\+\_\+image\+\_\+cam\+\_\+i, std\+::vector$<$ cv\+::\+Key\+Point $>$ \&keypoints\+\_\+previous\+\_\+i, std\+::vector$<$ cv\+::\+Key\+Point $>$ \&keypoints\+\_\+current\+\_\+i, cv\+::\+Mat \&descriptors\+\_\+previous\+\_\+i, cv\+::\+Mat \&descriptors\+\_\+current\+\_\+i)
\begin{DoxyCompactList}\small\item\em Compute keypoints and its descriptors in two images. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_ada1b7a3f4693f782da90feb111a59acc}{Compute\+Fundamental\+Matrix} (const cv\+::\+Mat \&current\+\_\+\+T\+\_\+previous, const cv\+::\+Mat cam\+\_\+K, cv\+::\+Mat \&current\+\_\+\+F\+\_\+previous)
\begin{DoxyCompactList}\small\item\em Compute the Fundamental matrix between two frames given their relative transformation matrix. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_a1cf35720359d0e9571e8ec233b6c2238}{Compute\+Matches\+Allvs\+All} (const cv\+::\+Mat \&descriptors\+\_\+previous\+\_\+i, const cv\+::\+Mat \&descriptors\+\_\+current\+\_\+i, std\+::vector$<$ cv\+::\+D\+Match $>$ \&best\+\_\+matches)
\begin{DoxyCompactList}\small\item\em Performs Brute force matching (all vs all) from a set of previous\+\_\+keypoints and current\+\_\+keypoints. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_a3464d9594b80dcda080bff19f7f9f9e3}{Filter\+Matches\+By\+Epipolar\+Constrain} (const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&keypoints\+\_\+previous\+\_\+i, const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&keypoints\+\_\+current\+\_\+i, const std\+::vector$<$ cv\+::\+D\+Match $>$ \&best\+\_\+matches, const cv\+::\+Mat \&F\+\_\+matrix, std\+::vector$<$ cv\+::\+D\+Match $>$ \&filtered\+\_\+matches)
\begin{DoxyCompactList}\small\item\em Uses epipolar geometry to filter the matches from a set of two images. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_a2027843784c5be77bebbad2785de51a7}{From\+Matches\+To\+Vectorof\+Points} (const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&keypoints\+\_\+frame1, const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&keypoints\+\_\+frame2, const std\+::vector$<$ cv\+::\+D\+Match $>$ \&matches, std\+::vector$<$ cv\+::\+Point2f $>$ \&points\+\_\+frame1, std\+::vector$<$ cv\+::\+Point2f $>$ \&points\+\_\+frame2)
\begin{DoxyCompactList}\small\item\em Transforms a vector of D\+Match type into a Point2d object. \end{DoxyCompactList}\item 
double \hyperlink{classcoldetector_1_1CollisionDetector_a27a359ba9c0c7b6966211ab35326179a}{Distance\+Point\+To\+Line} (const cv\+::\+Point2f point, const cv\+::\+Vec3f epiline)
\begin{DoxyCompactList}\small\item\em Computes the orthogonal distances from a 2D point to a line. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_a9b07097107a9acbf91bb5e338998d2c6}{Triangulate\+Points} (const cv\+::\+Mat \&base\+\_\+\+Tcam, const cv\+::\+Mat cam\+\_\+K, const cv\+::\+Mat \&current\+\_\+\+T\+\_\+previous, const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&keypoints\+\_\+previous\+\_\+i, const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&keypoints\+\_\+current\+\_\+i, const cv\+::\+Mat \&descriptors\+\_\+previous\+\_\+i, const cv\+::\+Mat \&descriptors\+\_\+current\+\_\+i, const std\+::vector$<$ cv\+::\+D\+Match $>$ \&filtered\+\_\+matches, const cv\+::\+Mat \&world\+\_\+\+Tcurrent\+\_\+base, bool b\+\_\+to\+\_\+world, std\+::vector$<$ cv\+::\+Mat $>$ \&final\+\_\+3d\+\_\+pts, cv\+::\+Mat \&final\+\_\+descriptors)
\begin{DoxyCompactList}\small\item\em Triangulate 3D points from a set of corresponding 2D matches. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_a432e4c735be67180cc599c2353e00beb}{Compute\+Projection\+Matrices} (const cv\+::\+Mat cam\+\_\+K, const cv\+::\+Mat \&current\+\_\+\+T\+\_\+previous, cv\+::\+Mat \&P\+\_\+previous, cv\+::\+Mat \&P\+\_\+current)
\begin{DoxyCompactList}\small\item\em Computes the Projection matrices of two frames. \end{DoxyCompactList}\item 
void \hyperlink{classcoldetector_1_1CollisionDetector_abf7f01bfb82b58af9683d565a901659d}{Get\+Array\+Of\+Points} (std\+::vector$<$ cv\+::\+Point2f $>$ \&points\+\_\+frame1, std\+::vector$<$ cv\+::\+Point2f $>$ \&points\+\_\+frame2, std\+::vector$<$ cv\+::\+Mat $>$ \&array\+\_\+of\+\_\+points)
\begin{DoxyCompactList}\small\item\em Adjust a set of cv\+:Point2f vector arrays into an Input\+Array\+Of\+Arrays object. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a94abb97b8bce8c4c839ba36696667adc}\label{classcoldetector_1_1CollisionDetector_a94abb97b8bce8c4c839ba36696667adc}} 
void \hyperlink{classcoldetector_1_1CollisionDetector_a94abb97b8bce8c4c839ba36696667adc}{Stop\+Request} ()
\begin{DoxyCompactList}\small\item\em Stops the thread when requested from the main program. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a6fa9191f807302da1bb1fae0d006be16}\label{classcoldetector_1_1CollisionDetector_a6fa9191f807302da1bb1fae0d006be16}} 
bool {\bfseries b\+\_\+do\+\_\+clahe\+\_\+}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a8db158921586ac5eac43de655d2a49bf}\label{classcoldetector_1_1CollisionDetector_a8db158921586ac5eac43de655d2a49bf}} 
bool {\bfseries b\+\_\+matching\+\_\+all\+\_\+all\+\_\+}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a876a4626ad6f0b42eca1015736c08b12}\label{classcoldetector_1_1CollisionDetector_a876a4626ad6f0b42eca1015736c08b12}} 
bool {\bfseries b\+\_\+pointcloud\+\_\+in\+\_\+world\+\_\+}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_ab456210400a1ba6ef873609dcf8317ee}\label{classcoldetector_1_1CollisionDetector_ab456210400a1ba6ef873609dcf8317ee}} 
bool {\bfseries b\+\_\+consider\+\_\+chassis\+\_\+b\+\_\+}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_ab23340a36c5a6de7ad9f57acfc2f07de}\label{classcoldetector_1_1CollisionDetector_ab23340a36c5a6de7ad9f57acfc2f07de}} 
bool {\bfseries b\+\_\+new\+\_\+data\+\_\+}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_ad71e38040d7e6f64ee79d095915321fe}\label{classcoldetector_1_1CollisionDetector_ad71e38040d7e6f64ee79d095915321fe}} 
\hyperlink{classMultiFrame}{Multi\+Frame} {\bfseries data\+\_\+current\+\_\+frame\+\_\+imgs}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_acda0507fbb212fe54a1165bd2b388c6d}\label{classcoldetector_1_1CollisionDetector_acda0507fbb212fe54a1165bd2b388c6d}} 
cv\+::\+Matx$<$ double, 4, 4 $>$ {\bfseries data\+\_\+current\+\_\+pose}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a3f9726dab2adda41e3c9a20dd496e0bd}\label{classcoldetector_1_1CollisionDetector_a3f9726dab2adda41e3c9a20dd496e0bd}} 
std\+::mutex {\bfseries m\+Receive\+Data}
\item 
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a7d4d389640ecf22e2c8d3bed14d187fb}\label{classcoldetector_1_1CollisionDetector_a7d4d389640ecf22e2c8d3bed14d187fb}} 
std\+::mutex {\bfseries m\+Mutex\+Stop}
\end{DoxyCompactItemize}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_aa4b6c5b052532e545758f84a668b43b2}\label{classcoldetector_1_1CollisionDetector_aa4b6c5b052532e545758f84a668b43b2}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Check\+Data\+Availability@{Check\+Data\+Availability}}
\index{Check\+Data\+Availability@{Check\+Data\+Availability}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Check\+Data\+Availability()}{CheckDataAvailability()}}
{\footnotesize\ttfamily bool coldetector\+::\+Collision\+Detector\+::\+Check\+Data\+Availability (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Checks if new image and pose data is available from the system and copies them for processing. 

\begin{DoxyReturn}{Returns}
temp Flag that indicates wether if new data has been receieved or not. 
\end{DoxyReturn}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_af385733b461bda4f537cb97f7616a352}\label{classcoldetector_1_1CollisionDetector_af385733b461bda4f537cb97f7616a352}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Compute\+Features@{Compute\+Features}}
\index{Compute\+Features@{Compute\+Features}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Compute\+Features()}{ComputeFeatures()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Compute\+Features (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{previous\+\_\+image\+\_\+cam\+\_\+i,  }\item[{const cv\+::\+Mat \&}]{current\+\_\+image\+\_\+cam\+\_\+i,  }\item[{std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{keypoints\+\_\+previous\+\_\+i,  }\item[{std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{keypoints\+\_\+current\+\_\+i,  }\item[{cv\+::\+Mat \&}]{descriptors\+\_\+previous\+\_\+i,  }\item[{cv\+::\+Mat \&}]{descriptors\+\_\+current\+\_\+i }\end{DoxyParamCaption})}



Compute keypoints and its descriptors in two images. 


\begin{DoxyParams}{Parameters}
{\em previous\+\_\+image\+\_\+cam\+\_\+i} & Image of camera i in the previous frame. \\
\hline
{\em current\+\_\+image\+\_\+cam\+\_\+i} & Image of camera i in the currnet frame. \\
\hline
{\em keypoints\+\_\+previous\+\_\+i} & Output vector of cv\+::\+Keypoints corresponding to features detected on previous frame. \\
\hline
{\em keypoints\+\_\+current\+\_\+i} & Output vector of cv\+::\+Keypoints corresponding to features detected on current frame. \\
\hline
{\em descriptors\+\_\+previous\+\_\+i} & Output vector of corresponding descriptors on previous frame. \\
\hline
{\em descriptors\+\_\+current\+\_\+i} & Output vector of corresponding descriptors on current frame. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_ada1b7a3f4693f782da90feb111a59acc}\label{classcoldetector_1_1CollisionDetector_ada1b7a3f4693f782da90feb111a59acc}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Compute\+Fundamental\+Matrix@{Compute\+Fundamental\+Matrix}}
\index{Compute\+Fundamental\+Matrix@{Compute\+Fundamental\+Matrix}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Compute\+Fundamental\+Matrix()}{ComputeFundamentalMatrix()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Compute\+Fundamental\+Matrix (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{current\+\_\+\+T\+\_\+previous,  }\item[{const cv\+::\+Mat}]{cam\+\_\+K,  }\item[{cv\+::\+Mat \&}]{current\+\_\+\+F\+\_\+previous }\end{DoxyParamCaption})}



Compute the Fundamental matrix between two frames given their relative transformation matrix. 


\begin{DoxyParams}{Parameters}
{\em current\+\_\+\+T\+\_\+previous} & relative transformation matrix of previous frame w.\+r.\+t the current frame. \\
\hline
{\em cam\+\_\+K} & The instrinsic parameters of the camera. \\
\hline
{\em current\+\_\+\+F\+\_\+previous} & Output Fundamental matrix of the previous frame w.\+r.\+t. the current frame. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a1cf35720359d0e9571e8ec233b6c2238}\label{classcoldetector_1_1CollisionDetector_a1cf35720359d0e9571e8ec233b6c2238}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Compute\+Matches\+Allvs\+All@{Compute\+Matches\+Allvs\+All}}
\index{Compute\+Matches\+Allvs\+All@{Compute\+Matches\+Allvs\+All}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Compute\+Matches\+Allvs\+All()}{ComputeMatchesAllvsAll()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Compute\+Matches\+Allvs\+All (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{descriptors\+\_\+previous\+\_\+i,  }\item[{const cv\+::\+Mat \&}]{descriptors\+\_\+current\+\_\+i,  }\item[{std\+::vector$<$ cv\+::\+D\+Match $>$ \&}]{best\+\_\+matches }\end{DoxyParamCaption})}



Performs Brute force matching (all vs all) from a set of previous\+\_\+keypoints and current\+\_\+keypoints. 


\begin{DoxyParams}{Parameters}
{\em descriptors\+\_\+previous\+\_\+i} & Descriptors computed on the previous frame. \\
\hline
{\em descriptors\+\_\+current\+\_\+i} & Descriptors computed on the current frame. \\
\hline
{\em best\+\_\+matches} & Output vector with matches that satisfy the Lowe\textquotesingle{}s ratio test. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a432e4c735be67180cc599c2353e00beb}\label{classcoldetector_1_1CollisionDetector_a432e4c735be67180cc599c2353e00beb}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Compute\+Projection\+Matrices@{Compute\+Projection\+Matrices}}
\index{Compute\+Projection\+Matrices@{Compute\+Projection\+Matrices}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Compute\+Projection\+Matrices()}{ComputeProjectionMatrices()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Compute\+Projection\+Matrices (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat}]{cam\+\_\+K,  }\item[{const cv\+::\+Mat \&}]{current\+\_\+\+T\+\_\+previous,  }\item[{cv\+::\+Mat \&}]{P\+\_\+previous,  }\item[{cv\+::\+Mat \&}]{P\+\_\+current }\end{DoxyParamCaption})}



Computes the Projection matrices of two frames. 


\begin{DoxyParams}{Parameters}
{\em cam\+\_\+K} & The instrinsic parameters of the camera. \\
\hline
{\em current\+\_\+\+T\+\_\+previous} & The relative transformation of image 2 w.\+r.\+t image 1. \\
\hline
{\em P\+\_\+previous} & Output Projection matrix of the previous frame. \\
\hline
{\em P\+\_\+current} & Output Projection matrix of the current frame. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a27a359ba9c0c7b6966211ab35326179a}\label{classcoldetector_1_1CollisionDetector_a27a359ba9c0c7b6966211ab35326179a}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Distance\+Point\+To\+Line@{Distance\+Point\+To\+Line}}
\index{Distance\+Point\+To\+Line@{Distance\+Point\+To\+Line}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Distance\+Point\+To\+Line()}{DistancePointToLine()}}
{\footnotesize\ttfamily double coldetector\+::\+Collision\+Detector\+::\+Distance\+Point\+To\+Line (\begin{DoxyParamCaption}\item[{const cv\+::\+Point2f}]{point,  }\item[{const cv\+::\+Vec3f}]{epiline }\end{DoxyParamCaption})}



Computes the orthogonal distances from a 2D point to a line. 


\begin{DoxyParams}{Parameters}
{\em point} & The 2D point in the image. \\
\hline
{\em epiline} & The corresponding epipolar line. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
distance The orthogonal distance from the point to the line. 
\end{DoxyReturn}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a3464d9594b80dcda080bff19f7f9f9e3}\label{classcoldetector_1_1CollisionDetector_a3464d9594b80dcda080bff19f7f9f9e3}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Filter\+Matches\+By\+Epipolar\+Constrain@{Filter\+Matches\+By\+Epipolar\+Constrain}}
\index{Filter\+Matches\+By\+Epipolar\+Constrain@{Filter\+Matches\+By\+Epipolar\+Constrain}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Filter\+Matches\+By\+Epipolar\+Constrain()}{FilterMatchesByEpipolarConstrain()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Filter\+Matches\+By\+Epipolar\+Constrain (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{keypoints\+\_\+previous\+\_\+i,  }\item[{const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{keypoints\+\_\+current\+\_\+i,  }\item[{const std\+::vector$<$ cv\+::\+D\+Match $>$ \&}]{best\+\_\+matches,  }\item[{const cv\+::\+Mat \&}]{F\+\_\+matrix,  }\item[{std\+::vector$<$ cv\+::\+D\+Match $>$ \&}]{filtered\+\_\+matches }\end{DoxyParamCaption})}



Uses epipolar geometry to filter the matches from a set of two images. 


\begin{DoxyParams}{Parameters}
{\em keypoints\+\_\+previous\+\_\+i} & Features detected on previous frame. \\
\hline
{\em keypoints\+\_\+current\+\_\+i} & Features detected on current frame. \\
\hline
{\em best\+\_\+matches} & Set of feature matches between images. \\
\hline
{\em F\+\_\+matrix} & Fundamental matrix of the previous frame w.\+r.\+t. the current frame. \\
\hline
{\em filtered\+\_\+matches} & Output vector with all the feature matches that satisfy the epipolar constraint. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a3e5a171f0d396656745e84b8e7a80cd9}\label{classcoldetector_1_1CollisionDetector_a3e5a171f0d396656745e84b8e7a80cd9}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Frames\+Update@{Frames\+Update}}
\index{Frames\+Update@{Frames\+Update}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Frames\+Update()}{FramesUpdate()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Frames\+Update (\begin{DoxyParamCaption}\item[{\hyperlink{classMultiFrame}{Multi\+Frame} \&}]{current\+\_\+frame }\end{DoxyParamCaption})}



Updates the previous\+\_\+frame data with the current\+\_\+frame that was already processed. 


\begin{DoxyParams}{Parameters}
{\em current\+\_\+frame} & Frame data corresponding to the newly processed data. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a2027843784c5be77bebbad2785de51a7}\label{classcoldetector_1_1CollisionDetector_a2027843784c5be77bebbad2785de51a7}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!From\+Matches\+To\+Vectorof\+Points@{From\+Matches\+To\+Vectorof\+Points}}
\index{From\+Matches\+To\+Vectorof\+Points@{From\+Matches\+To\+Vectorof\+Points}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{From\+Matches\+To\+Vectorof\+Points()}{FromMatchesToVectorofPoints()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+From\+Matches\+To\+Vectorof\+Points (\begin{DoxyParamCaption}\item[{const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{keypoints\+\_\+frame1,  }\item[{const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{keypoints\+\_\+frame2,  }\item[{const std\+::vector$<$ cv\+::\+D\+Match $>$ \&}]{matches,  }\item[{std\+::vector$<$ cv\+::\+Point2f $>$ \&}]{points\+\_\+frame1,  }\item[{std\+::vector$<$ cv\+::\+Point2f $>$ \&}]{points\+\_\+frame2 }\end{DoxyParamCaption})}



Transforms a vector of D\+Match type into a Point2d object. 


\begin{DoxyParams}{Parameters}
{\em keypoints\+\_\+frame1} & Features detected on frame 1. \\
\hline
{\em keypoints\+\_\+frame2} & Features detected on frame 2. \\
\hline
{\em matches} & Vector of the computed matches between frames. \\
\hline
{\em points\+\_\+frame1} & Output vector of cv\+::\+Point2f 2D points on frame 1. \\
\hline
{\em points\+\_\+frame2} & Output vector of cv\+::\+Point2f 2D points on frame 2. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_abf7f01bfb82b58af9683d565a901659d}\label{classcoldetector_1_1CollisionDetector_abf7f01bfb82b58af9683d565a901659d}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Get\+Array\+Of\+Points@{Get\+Array\+Of\+Points}}
\index{Get\+Array\+Of\+Points@{Get\+Array\+Of\+Points}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Get\+Array\+Of\+Points()}{GetArrayOfPoints()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Get\+Array\+Of\+Points (\begin{DoxyParamCaption}\item[{std\+::vector$<$ cv\+::\+Point2f $>$ \&}]{points\+\_\+frame1,  }\item[{std\+::vector$<$ cv\+::\+Point2f $>$ \&}]{points\+\_\+frame2,  }\item[{std\+::vector$<$ cv\+::\+Mat $>$ \&}]{array\+\_\+of\+\_\+points }\end{DoxyParamCaption})}



Adjust a set of cv\+:Point2f vector arrays into an Input\+Array\+Of\+Arrays object. 


\begin{DoxyParams}{Parameters}
{\em points\+\_\+frame1} & of cv\+::\+Point2f 2D points on frame 1. \\
\hline
{\em points\+\_\+frame2} & of cv\+::\+Point2f 2D points on frame 2. \\
\hline
{\em array\+\_\+of\+\_\+points} & Set of points converted to an std\+::vector of cv\+::\+Mat. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a01855b9eb3534d701df52f0f503fdc1e}\label{classcoldetector_1_1CollisionDetector_a01855b9eb3534d701df52f0f503fdc1e}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Get\+Relative\+Transformation\+Between\+Frames@{Get\+Relative\+Transformation\+Between\+Frames}}
\index{Get\+Relative\+Transformation\+Between\+Frames@{Get\+Relative\+Transformation\+Between\+Frames}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Get\+Relative\+Transformation\+Between\+Frames()}{GetRelativeTransformationBetweenFrames()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Get\+Relative\+Transformation\+Between\+Frames (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{base\+\_\+\+T\+\_\+cam,  }\item[{const cv\+::\+Mat \&}]{world\+\_\+\+Tprevious\+\_\+base,  }\item[{const cv\+::\+Mat \&}]{world\+\_\+\+Tcurrent\+\_\+base,  }\item[{cv\+::\+Mat \&}]{cam\+\_\+previous\+\_\+\+T\+\_\+cam\+\_\+current }\end{DoxyParamCaption})}



Computes the relative transformation between two frames. 


\begin{DoxyParams}{Parameters}
{\em base\+\_\+\+T\+\_\+cam} & Transformation of the camera i w.\+r.\+t to the camera origin. \\
\hline
{\em world\+\_\+\+Tprevious\+\_\+base} & Transformation of the camera origin w.\+r.\+t the world on the previous frame. \\
\hline
{\em world\+\_\+\+Tcurrent\+\_\+base} & Transformation of the camera origin w.\+r.\+t the world on the current frame. \\
\hline
{\em cam\+\_\+previous\+\_\+\+T\+\_\+cam\+\_\+current} & Output relative transformation matrix. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_aa09c4115cdb0c5e3c0ecb3a29d3aac96}\label{classcoldetector_1_1CollisionDetector_aa09c4115cdb0c5e3c0ecb3a29d3aac96}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Run@{Run}}
\index{Run@{Run}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Run()}{Run()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Run (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Obtains a pair of images and the estimated poses (v\+S\+L\+Am, I\+NS data) and processed them to obtain the 3D points of the robot surroundings. 

Get camera base poses w.\+r.\+t. the world

Process camera data \mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a41e80df83d6f79de79798674bef21156}\label{classcoldetector_1_1CollisionDetector_a41e80df83d6f79de79798674bef21156}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!transfer\+Data@{transfer\+Data}}
\index{transfer\+Data@{transfer\+Data}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{transfer\+Data()}{transferData()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::transfer\+Data (\begin{DoxyParamCaption}\item[{const \hyperlink{classMultiFrame}{Multi\+Frame} \&}]{F,  }\item[{bool}]{new\+\_\+data }\end{DoxyParamCaption})}



Transfers data from the main program to the collision detection thread. 


\begin{DoxyParams}{Parameters}
{\em F} & \hyperlink{classMultiFrame}{Multi\+Frame} object that contains an array of N images, corresponding to each camera. \\
\hline
{\em new\+\_\+data} & Flag that indicates that new data has been received. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{classcoldetector_1_1CollisionDetector_a9b07097107a9acbf91bb5e338998d2c6}\label{classcoldetector_1_1CollisionDetector_a9b07097107a9acbf91bb5e338998d2c6}} 
\index{coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}!Triangulate\+Points@{Triangulate\+Points}}
\index{Triangulate\+Points@{Triangulate\+Points}!coldetector\+::\+Collision\+Detector@{coldetector\+::\+Collision\+Detector}}
\subsubsection{\texorpdfstring{Triangulate\+Points()}{TriangulatePoints()}}
{\footnotesize\ttfamily void coldetector\+::\+Collision\+Detector\+::\+Triangulate\+Points (\begin{DoxyParamCaption}\item[{const cv\+::\+Mat \&}]{base\+\_\+\+Tcam,  }\item[{const cv\+::\+Mat}]{cam\+\_\+K,  }\item[{const cv\+::\+Mat \&}]{current\+\_\+\+T\+\_\+previous,  }\item[{const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{keypoints\+\_\+previous\+\_\+i,  }\item[{const std\+::vector$<$ cv\+::\+Key\+Point $>$ \&}]{keypoints\+\_\+current\+\_\+i,  }\item[{const cv\+::\+Mat \&}]{descriptors\+\_\+previous\+\_\+i,  }\item[{const cv\+::\+Mat \&}]{descriptors\+\_\+current\+\_\+i,  }\item[{const std\+::vector$<$ cv\+::\+D\+Match $>$ \&}]{filtered\+\_\+matches,  }\item[{const cv\+::\+Mat \&}]{world\+\_\+\+Tcurrent\+\_\+base,  }\item[{bool}]{b\+\_\+to\+\_\+world,  }\item[{std\+::vector$<$ cv\+::\+Mat $>$ \&}]{final\+\_\+3d\+\_\+pts,  }\item[{cv\+::\+Mat \&}]{final\+\_\+descriptors }\end{DoxyParamCaption})}



Triangulate 3D points from a set of corresponding 2D matches. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em base\+\_\+\+Tcam} & Extrinsic camera parametes. \\
\hline
\mbox{\tt in}  & {\em cam\+\_\+K} & The instrinsic parameters of the camera. \\
\hline
\mbox{\tt in}  & {\em current\+\_\+\+T\+\_\+previous} & The relative transformation of image 2 w.\+r.\+t image 1. \\
\hline
\mbox{\tt in}  & {\em keypoints\+\_\+previous\+\_\+i} & Features detected on image 1. \\
\hline
\mbox{\tt in}  & {\em keypoints\+\_\+current\+\_\+i} & Features detected on image 2. \\
\hline
\mbox{\tt in}  & {\em descriptors\+\_\+previous\+\_\+i} & Descriptors computed on the previous frame. \\
\hline
\mbox{\tt in}  & {\em descriptors\+\_\+current\+\_\+i} & Descriptors computed on the current frame. \\
\hline
\mbox{\tt in}  & {\em filtered\+\_\+matches} & Feature matches between image 1 and image 2. \\
\hline
\mbox{\tt in}  & {\em world\+\_\+\+Tcurrent\+\_\+base} & Transformation of the camera i w.\+r.\+t the world. \\
\hline
\mbox{\tt in}  & {\em b\+\_\+to\+\_\+world} & Flag to indicate if the final point cloud should be referenced to the world. \\
\hline
\mbox{\tt out}  & {\em triangulated\+\_\+3dpoints} & Output array with the correspondent 3D point \\
\hline
\mbox{\tt out}  & {\em final\+\_\+descriptors} & Output matrix of the correspondent descriptors from the 3D points that were computed. \\
\hline
\end{DoxyParams}
Check 3D points 

The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
include/collision\+\_\+detector.\+h\item 
src/collision\+\_\+detector.\+cpp\end{DoxyCompactItemize}
